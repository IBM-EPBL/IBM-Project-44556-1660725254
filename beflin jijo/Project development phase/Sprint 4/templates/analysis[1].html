<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- bootstrap for the cards -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Analysis</title>
</head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<body>
    <div class="container-fluid" >
        <div class="row flex-nowrap">
            <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0" style="background-color: #0a98ea; ">
                <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 min-vh-100" style="color:black">
                    <p class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                        <span class="fs-5 d-none d-sm-inline" style="color:black; font-weight: bold;">PE Tracker</span>
                        <img src="../static/images/bank.png" style="width:50px;height: 50px;">
                    </p>
                    <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
                        <li class="nav-item mt-2" style="background-color:#0a98ea; height: 50px; width: 150px; border-radius: 5px;">
                            <a href="dashboard" class="nav-link align-middle px-0" style="color:black;">
                               <span class="ms-1 d-none d-sm-inline">Home</span>
                               <img src="../static/images/house-outline.svg" style="width:20px;height:20px;margin-left: 5px;">
                            </a>
                        </li>
                        <li class="nav-item mt-2">
                            <a href="addexpense" class="nav-link px-0 align-middle" style="color:black;">
                                <span class="ms-1 d-none d-sm-inline">Add Expense</span>
                                <img src="../static/images/pay.png" style="width:20px;height:20px;margin-left: 5px;">
                            </a>
                        </li>
                        <li class="nav-item mt-2">
                            <a href="modifyexpense" class="nav-link px-0 align-middle" style="color:black;">
                                <span class="ms-1 d-none d-sm-inline">Modify Expense</span>
                                <img src="../static/images/edit_icon.svg" style="width:20px;height:20px;margin-left: 5px;">
                            </a>
                        </li>
                        <li class="nav-item mt-2">
                            <a href="analysis" class="nav-link px-0 align-middle" style="color:black;">
                                <span class="ms-1 d-none d-sm-inline">View Analysis</span>
                                <img src="../static/images/graph.png" style="width:20px;height:20px;margin-left: 5px;">
                            </a>
                        </li>
                        <li class="nav-item mt-2">
                            <a href="rewards" class="nav-link px-0 align-middle" style="color:black;">
                                <span class="ms-1 d-none d-sm-inline">Rewards & Goals</span>
                                <img src="../static/images/reward.png" style="width:20px;height:20px;margin-left: 5px;">
                            </a>
                        </li>                        
                        <li class="nav-item mt-2">
                            <a href="addcategory" class="nav-link px-0 align-middle" style="color:black;">
                                <span class="ms-1 d-none d-sm-inline">Create category</span>
                                <img src="../static/images/category_add.webp" style="width:20px;height:20px;margin-left: 5px;">
                            </a>
                        </li>
                    </ul>
                    <a href="login" style="background-color:#0a98ea; height: 50px; width: 150px; border-radius: 5px;"class="btn btn-lg"><span class="glyphicon glyphicon-log-out"></span> Log out
                    </a>
                </div>
            </div>
            <div class="col py-3" style="background-color:#8f8f8f; background-image :url('../static/images/backgrd1.jpeg');">
                <h4 style="color:red;">{{ msg }}</h4>
                <h3 style="color:black; text-align: center;">Welcome Back! {{ email }}</h3>
                <div class="d-flex justify-content-end">
                    <img src="../static/images/wallet_money.webp"
                        style="height: 30px; width:30px">
                    <h4 style="margin-left:10px;">Wallet Balance: <span><h5 style="display:inline"><i>{{wallet}}</i></h5></span></h4>
                    <a href="updatebalance"><img src="../static/images/edit_pencil.png"
                        style="margin-left:5px; height: 30px; width:30px"></a>
                </div>
                <h3>Analysis Of Income,Categories</h3>
                <div class="card-deck">
                    <div class="col-xs-5, col-sm-5">
                        <div class="card card-style mb-3">
                            <div class="card-body">
                                <div class="chart-container" style="position: relative;">
                                    <canvas id="income_vs_expense"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-5, col-sm-5">
                        <div class="card card-style mb-3">
                            <div class="card-body">
                                <div class="chart-container" style="position: relative;">
                                    <canvas id="income_vs_category"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-5, col-sm-5">
                        <div class="card card-style mb-2">
                            <div class="card-body">
                                <div class="chart-container" style="position: relative;">
                                    <canvas id="expenses_over_time"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </body>
                </div>
            </div>
        </div>
<!--chatbot-->
  <script>
    window.watsonAssistantChatOptions = {
      integrationID: "506c7f66-f831-4e32-9e08-210986a6b823", // The ID of this integration.
      region: "us-south", // The region your integration is hosted in.
      serviceInstanceID: "872bca5b-fa57-46ee-9e4d-cea0e3ff4da0", // The ID of your service instance.
      onLoad: function(instance) { instance.render(); }
    };
    setTimeout(function(){
      const t=document.createElement('script');
      t.src="https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + (window.watsonAssistantChatOptions.clientVersion || 'latest') + "/WatsonAssistantChatEntry.js";
      document.head.appendChild(t);
    });
  </script>
<!--end chatbot-->
    </div>

    <!-- <canvas id="myChart" width="400" height="400"></canvas> -->
<script>
    let income_vs_expense_data = [4250,15000]
    Chart.scaleService.updateScaleDefaults('linear', {
            ticks: {
                min: 0
            }
    });
    let income_vs_expense_chart = new Chart(income_vs_expense, {
            type: 'pie',
            data: {
            labels: ['expense', 'income'],
                datasets: [{
                    label: "Income Vs Expenses",
                    data: income_vs_expense_data,
                    backgroundColor: ['#5DA5DA ', '#FAA43A', '#60BD68',
                        '#B276B2', '#E16851', '#FB8267'],

                    borderWidth: 1,
                    hoverBorderColor: "black",
                    hoverBorderWidth: 2,
                    hoverBackgroundColor: 'rgba(154, 245, 140)',
                    pointHoverRadius: 5
                }],
            },
            options: {
                    title: {
                        display: true,
                            text: "Income Vs Expenses",
                                fontSize: 20,
                    },
                    legend: {
                        position: "right",
                            labels: {
                            fontColor: "gray"
                        },
                        display: true,
                    },

                    elements: {
                        hitRadius: 3,
                    }
            }
        })
        let dates = ['2022-11-13','2022-11-13','2022-11-13','2022-11-13','2022-11-13']
        let amounts = [4291,123,35,678.2000]
        new Chart(document.getElementById("expenses_over_time"), {
                type: "line",
                data:
                {
                    labels: dates,
                    datasets: [{
                        label: "Expenditure Over Time",
                        
                        data: amounts,
                        fill: false,
                        borderColor: "rgb(75, 192, 192)",
                        lineTension: 0.1
                    }]
                },
                options: {}
            });
            let income_vs_category_chart = new Chart(income_vs_category, {
            type: 'bar',
            data: {
                labels: ['Food', 'shopping', 'rent', 'medical'],
                datasets: [{
                    label: "Categories Of Income",
                    data: [2012,4567,6000,400],
            backgroundColor: ['#5DA5DA ', '#FAA43A', '#60BD68',
                '#B276B2', '#E16851', '#FB8267'],
            borderWidth: 1,
            hoverBorderColor: "black",
            hoverBorderWidth: 2,
            hoverBackgroundColor: 'rgba(154, 245, 140)',
            pointHoverRadius: 5
        }],
            },
        options: {
                title: {
                    display: true,
                        text: "Income Categories",
                            fontSize: 20,
            },
                legend: {
                    position: "right",
                        labels: {
                        fontColor: "gray"
                    },
                    display: true,
            },

                elements: {
                    hitRadius: 3,
            }
            }
        })
</script>


</html>