from flask import flask,request,render_template,redirect
import os
import sqlite3

currentlocation = os.path.dirname(os.path.abspath(__file__))

myapp = flask(__name__)

@myapp.route("/")
def homepage():
    return render_template("homepage.html")

    @myapp.route("/", methods =["POST"])
    def checklogin():
        UN=request.form["Username"]
        EM=request.form["Email"]
        PH=request.form["Phoneno"]

        sqlconnection=sqlite3.connection(currentlocation+ "\Login.db")
        cursor=sqlconnection.cursor()
        query1="SELECT Username, Email,Phoneno From Users WHERE Username='{UN}' AND Email='{EM}' AND Phoneno='{PH}'".format(un=UN,em=EM,ph=PH)

        rows=cursor.execute(query1)
        rows=rows.fetcha11()
        if len(rows)==1:
            return render_template("LoggedIn.html")
        else:
                return redirect("/register")
                @myapp.route("/register",methods=["GET","POST"])
                def registerpage():
                    if request.method=="POST":
                        dUN=request.form["DUsername"]
                        dEM=request.form["DEmail"]
                        dPH=request.form["DPhoneno"]
                        sqlconnection=sqlite3.connection(currentlocation + "\Login.db")
                        cursor=sqlconnection.cursor()
                        query1="INSERT INTO Users VALUES('{u}','{p}','{e}')".format(u=dUN,p=dEM,e=dPH)
                        cursor.execute(query1)
                        sqlconnection.commit()
                        return redirect("/")
                    return render_template("Register.html")

                if__name__ =="__main__"
                myapp.run()


